# 需求规格说明：成渝地区铁路客运智能分析与可视化系统

## 引言
本说明列举成渝地区铁路客运智能分析与可视化系统的功能性与非功能性需求，确保系统能够为成渝铁路走廊提供一体化的旅客分析和可视化能力。

## 功能性需求
1. **数据采集与集成**
   - FR-1.1：系统应通过安全 API 或批量上传方式，从成都与重庆铁路运营方采集时刻表、售票、客流和运营状态数据。
   - FR-1.2：系统应将源数据标准化，形成覆盖车站、线路、列车和票务交易的统一数据模型。
   - FR-1.3：系统应至少每 15 分钟更新一次数据，并在采集失败时向管理员发出告警。
2. **数据质量管理**
   - FR-2.1：系统在入库前应执行校验规则（如站点存在性、时间戳顺序、票价范围等）。
   - FR-2.2：系统应生成每日数据质量报告，概述异常、缺失字段和纠正措施。
3. **分析与预测**
   - FR-3.1：系统应计算关键指标，如各站客流量、线路满载率、峰值拥堵时段和停站时间。
   - FR-3.2：系统应提供至少可提前 48 小时的逐小时客流预测模型。
   - FR-3.3：系统应支持通过调整运力方案进行情景模拟，并展示预测影响。
4. **可视化与仪表板**
   - FR-4.1：系统应向规划、运营和管理层提供交互式仪表板，并基于角色控制访问权限。
   - FR-4.2：系统应提供覆盖成渝铁路网络的地理可视化地图，叠加站点状态与拥堵情况。
   - FR-4.3：系统应支持阈值触发的告警，并通过邮件或消息平台推送。
5. **报告与导出**
   - FR-5.1：用户应可导出自定义时间范围的 KPI 与预测结果报告（PDF、Excel）。
   - FR-5.2：系统应提供 API，供下游系统获取汇总分析数据。
6. **安全与访问控制**
   - FR-6.1：系统应支持与市级身份认证系统集成的单点登录。
   - FR-6.2：系统应实施基于角色的权限管理，控制对数据集、仪表板和管理功能的访问。
   - FR-6.3：系统应保留用户行为审计记录，保存期不少于 12 个月。

## 非功能性需求
- **性能（NFR-1）**：针对最长 12 个月历史数据的仪表板交互，应在 4 秒内完成响应。
- **可扩展性（NFR-2）**：平台应支持在无需重大架构调整的情况下，处理当前客流量的两倍规模。
- **可用性（NFR-3）**：生产服务月度可用性应达到 99.5%，并具备自动故障切换能力。
- **安全性（NFR-4）**：敏感数据在传输与存储过程中必须加密；系统需符合等级保护三级要求。
- **可靠性（NFR-5）**：ETL 任务应具备自动重试与监控，确保成功率达到已排程任务的 ≥99%。
- **易用性（NFR-6）**：仪表板应符合 WCAG 2.1 AA 无障碍标准，并支持中英文界面切换。
- **可维护性（NFR-7）**：核心分析与可视化模块的自动化测试覆盖率应≥80%。
- **互操作性（NFR-8）**：API 应遵循 RESTful 规范并提供 OpenAPI 文档，便于集成伙伴使用。

## 用例
### UC-1：监控车站拥堵
- **角色**：运营经理
- **前置条件**：最新客流数据已采集，用户以运营角色登录。
- **流程**：
  1. 运营经理打开网络地图仪表板。
  2. 系统以颜色区分的方式展示各站拥堵情况。
  3. 经理按时间窗口和线路筛选数据。
  4. 系统更新指标并突出显示超过拥堵阈值的站点。
  5. 经理向车站工作人员触发告警通知。
- **后置条件**：告警被记录，拥堵缓解方案启动。

### UC-2：预测节假日客流
- **角色**：规划分析师
- **前置条件**：历史数据已采集，预测模型已训练。
- **流程**：
  1. 分析师打开预测仪表板并选择即将到来的假期周。
  2. 系统加载各线路和站点的基线预测。
  3. 分析师调整计划运力方案。
  4. 系统重新计算客流预测与运力利用率。
  5. 分析师导出报告供决策者审阅。
- **后置条件**：情景结果被存档，导出报告归档。

### UC-3：调查票务异常
- **角色**：合规专员
- **前置条件**：票务交易数据可用，用户具有合规角色权限。
- **流程**：
  1. 合规专员检索票价交易异常。
  2. 系统依据阈值展示异常记录。
  3. 专员深入查看关联站点和列车的票务详情。
  4. 系统展示历史背景及相关告警。
  5. 专员记录发现并标记需进一步调查的交易。
- **后置条件**：审计日志更新，异常案例进入后续处理。

## 与项目简述的对应关系
系统围绕统一数据集成、高级分析、实时监控与多方仪表板展开，直接支持项目简述中“实现成渝铁路客运服务智能优化”的目标。非功能性需求确保平台满足交通主管部门对可靠性、安全性与可用性的要求。
